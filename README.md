# segment-service-api 

## Project tree

```
๐ฆ segment-service-api
โโย.github
โยยโโยworkflows
โยยยยยโโยgo.yml
โโย.gitignore
โโยDockerfile
โโยMakefile
โโยREADME.md
โโยapi
โยยโโยsegment
โยยโยยโโยsegment.proto
โยยโโยuser
โยยยยยโโยuser.proto
โโยcmd
โยยโโยserver
โยยยยยโโยsegment_service.go
โโยconfig.yml
โโยdatabase
โยยโโยinit.sql
โโยdocker-compose.yml
โโยgo.mod
โโยgo.sum
โโยinternal
โยยโโยapi
โยยโยยโโยsegment_v1
โยยโยยโยยโโยadd_segment.go
โยยโยยโยยโโยadd_segment_test.go
โยยโยยโยยโโยremove_segment.go
โยยโยยโยยโโยremove_segment_test.go
โยยโยยโยยโโยsegment_v1.go
โยยโยยโโยuser_v1
โยยโยยยยยโโยadd_user.go
โยยโยยยยยโโยadd_user_test.go
โยยโยยยยยโโยget segments.go
โยยโยยยยยโโยget_history.go
โยยโยยยยยโโยget_history_test.go
โยยโยยยยยโโยget_segments_test.go
โยยโยยยยยโโยmodify_segments.go
โยยโยยยยยโโยmodify_segments_test.go
โยยโยยยยยโโยremove_user.go
โยยโยยยยยโโยremove_user_test.go
โยยโยยยยยโโยset_expire_time.go
โยยโยยยยยโโยset_expire_time_test.go
โยยโยยยยยโโยuser_v1.go
โยยโโยapp
โยยโยยโโยapp.go
โยยโยยโโยservice_provider.go
โยยโโยclient
โยยโยยโโยdb
โยยโยยยยยโโยclient.go
โยยโยยยยยโโยdb.go
โยยโยยยยยโโยmocks_db
โยยโยยยยยโยยโโยmock_db.go
โยยโยยยยยโโยmocks_tx
โยยโยยยยยโยยโโยmock_tx.go
โยยโยยยยยโโยtransaction
โยยโยยยยยยยยโโยtransaction.go
โยยโโยconfig
โยยโยยโโยconfig.go
โยยโโยconvert
โยยโยยโโยconvert.go
โยยโโยmodel
โยยโยยโโยmodel.go
โยยโโยrepository
โยยโยยโโยmocks
โยยโยยโยยโโยsegment_mocks
โยยโยยโยยโยยโโยsegment_service_repository.go
โยยโยยโยยโโยuser_mocks
โยยโยยโยยยยยโโยuser_service_repository.go
โยยโยยโโยsegment
โยยโยยโยยโโยadd_segment.go
โยยโยยโยยโโยremove_segment.go
โยยโยยโยยโโยsegment.go
โยยโยยโโยtable
โยยโยยโยยโโยtables.go
โยยโยยโโยuser
โยยโยยยยยโโยadd_user.go
โยยโยยยยยโโยget_history.go
โยยโยยยยยโโยget_segment_id.go
โยยโยยยยยโโยget_segments.go
โยยโยยยยยโโยget_user.go
โยยโยยยยยโโยmodify_segments.go
โยยโยยยยยโโยremove_user.go
โยยโยยยยยโโยset_expire_time.go
โยยโยยยยยโโยuser.go
โยยโโยservice
โยยยยยโโยsegment
โยยยยยโยยโโยadd_segment.go
โยยยยยโยยโโยremove_segment.go
โยยยยยโยยโโยsegment.go
โยยยยยโโยuser
โยยยยยยยยโโยadd_user.go
โยยยยยยยยโโยget_history.go
โยยยยยยยยโโยget_segments.go
โยยยยยยยยโโยmodify_segments.go
โยยยยยยยยโโยremove_user.go
โยยยยยยยยโโยset_expire_time.go
โยยยยยยยยโโยuser.go
โโยpkg
โยยโโยsegment_api
โยยโยยโโยapi.swagger.json
โยยโยยโโยsegment.pb.go
โยยโยยโโยsegment.pb.gw.go
โยยโยยโโยsegment.pb.validate.go
โยยโยยโโยsegment_grpc.pb.go
โยยโโยuser_api
โยยยยยโโยapi.swagger.json
โยยยยยโโยuser.pb.go
โยยยยยโโยuser.pb.gw.go
โยยยยยโโยuser.pb.validate.go
โยยยยยโโยuser_grpc.pb.go
โโยreadme_assets
ยยยโโยlogo-avito.png
```
ยฉgenerated by [Project Tree Generator](https://woochanleee.github.io/project-tree-generator)

## Brief description

<p align="justify">
	
ะญัะพ ัะตัะฒะธั ะดะปั ะดะธะฝะฐะผะธัะตัะบะพะณะพ ะฝะฐะทะฝะฐัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะตะณะผะตะฝัะฐะผ ะฒ ัะฐะผะบะฐั ะฟัะพะตะบัะฐ ะดะปั ะพัะฑะพัะฐ ะฒ Avito. ะัะต ัะตะบััะพะฒัะต ะทะฝะฐัะตะฝะธั, ะฟะตัะตะดะฐะฒะฐะตะผัะต ัะตัะฒะธัั ะฝะต ะดะพะปะถะฝั ะฟัะตะฒััะฐัั ะดะปะธะฝั ัััะพะบะธ 100 (ะฟััััะต ัััะพะบะธ ะทะฐะฟัะตัะตะฝั). ะะฐััะธะฒั ะทะฝะฐัะตะฝะธะน ะดะพะปะถะฝั ัะพะดะตัะถะฐัั ะฝะต ะฟะพะฒัะพััััะธะตัั ะทะฝะฐัะตะฝะธั. ะะปั ะฒัะฟะพะปะฝะตะฝะธั ััะธั ััะปะพะฒะธะน ะพัะณะฐะฝะธะทะพะฒะฐะฝะฐ ะฒะฐะปะธะดะฐัะธั. ะกะตัะฒะธั ะฟัะธะฝะธะผะฐะตั ะทะฐะฟัะพัั ะบะฐะบ ั ะฟะพะผะพััั gRPC, ัะฐะบ ะธ ั ะฟะพะผะพััั HTTP, ะฒ ะฝัะผ ัะฐััะธัะฝะพ ัะตะฐะปะธะทะปะพะฒะฐะฝะฐ ะธะดะตั model-view-control, ะพะดะฝะฐะบะพ ัะปะพะน-ะฐะดะฐะฟัะตั ะฑัะป ัะพะบัะฐัะตะฝ ะฒะฒะธะดั ะฟัะพััะพัั ะฒัะฟะพะปะฝัะตะผัั ะพะฟะตัะฐัะธะน. ะขะฐะบ ะบะฐะบ ะฒ ะทะฐะดะฐะฝะธะธ, ะฒัะดะฐะฝะฝะพะผ ะฐะฒะธัะพ, ะพะฟะตัะฐัะธั ะผะพะดะธัะธะบะฐัะธะธ ัะตะณะผะตะฝัะพะฒ, ะฟัะธะฒัะทะฐะฝะฝัั ะบ ะฟะพะปัะทะพะฒะฐัะตะปั, ะพะฑะพะทะฝะฐัะตะฝะฐ ะฝะต ะฐัะพะผะฐัะฝะพะน (ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะธ ะดะพะฑะฐะฒะปะตะฝะธะต ะธ ัะดะฐะปะตะฝะธะต ัะตะณะผะตะฝัะพะฒ), ะฑัะปะฐ ะฟัะธะผะตะฝะตะฝะฐ ะพะฑะพะปะพัะบะฐ, ะฟะพะทะฒะพะปัััะฐั ะฟัะตะฒัะฐัะฐัั ะพะฟะตัะฐัะธะธ ะฒ ััะฐะฝะทะฐะบัะธะธ (ะฒ ะผะตัะพะดะต ModifySegments service-ัะปะพั). <br /> **ะะพะฟะพะปะฝะธัะตะปัะฝะพะต ะทะฐะดะฐะฝะธะต 1**. ะัะปะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ ั ะฟะพะผะพััั ััะฐะฝะตะฝะธั ะฒัะตะผะตะฝะธ ะดะพะฑะฐะฒะปะตะฝะธั ะทะฐะฟะธัะธ ะพ ัะฒัะทะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ัะตะณะผะตะฝัะฐ ะฒ ัะฐะฑะปะธัั-ัะฒัะทะบั (ะผะฝะพะณะธะต-ะบะพ-ะผะฝะพะณะธะผ). ะัะธ ััะพะผ ะฟัะธ ะพัะฒัะทะบะต ัะตะณะผะตะฝัะฐ ะพั ะฟะพะปัะทะพะฒะฐัะตะปั ัะผะตะฝัะตััั ัะปะฐะณ ะธ ะทะฐะฟะธัั ะฟัะตะฒัะฐัะฐะตััั ะฒ ะฐััะธะฒะฝัั (id ะบะปะธะตะฝัะฐ, id ัะตะณะผะตะฝัะฐ, ะฒัะตะผั ัะพะทะดะฐะฝะธั ัะฒัะทะธ, ะฒัะตะผั ะตะต ัะดะฐะปะตะฝะธั, ััะฐััั). ะัะธ ัะดะฐะปะตะฝะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะธะปะธ ัะตะณะผะตะฝัะฐ, ัะฒัะทะฐะฝะฝัะต ั ะฝะธะผ ะทะฐะฟะธัะธ ะฒ ัะฐะฑะปะธัะต-ัะฒัะทะบะต ะบะฐัะบะฐะดะฝะพ ัะดะฐะปััััั. <br /> **ะะพะฟะพะปะฝะธัะตะปัะฝะพะต ะทะฐะดะฐะฝะธะต 2**. ะัะปะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ ั ะฟะพะผะพััั ะฟะพะปั, ะพัะฒะตัะฐััะตะณะพ ะทะฐ ะฒัะตะผั ัะดะฐะปะตะฝะธั (ะฒ ัะปััะฐะต ะพะฟะตัะฐัะธะธ ัะดะฐะปะตะฝะธั ะฒ ััะพ ะฟะพะปะต ะทะฐะฟะธััะฒะฐะตััั ัะตะบััะตะต ะฒัะตะผั, ะฐ ะฒ ัะปััะฐะต ะฝะฐะทะฝะฐัะตะฝะธั Time-To-Live, ะธัะฟะพะปัะทัะตััั ะพัะดะตะปัะฝัะน ะผะตัะพะด, ะบะพัะพััะน ะฝะฐะทะฝะฐัะฐะตั ะฒัะตะผั ะพัะฒัะทะบะธ ัะตะณะผะตะฝัะฐ ะพั ะฟะพะปัะทะพะฒะฐัะตะปั). ะัะพัะตัั ะธัะฟะพะปะฝะตะฝะธั ััะพะน ะพัะฒัะทะบะธ ะฒะฝะต ัะฐะผะพะบ ะทะฐะดะฐะฝะธั. <br /> ะะปั ัะฐะฑะพัั ัะตัะฒะธัะฐ ะผะธะฝะธะผะฐะปัะฝะพ ะฝะตะพะฑัะพะดะธะผ [Docker](https://www.docker.com/)  ะฐ ัะฐะบะถะต Linux-ัะธััะตะผะฐ, ะปะธะฑะพ WSL ะดะปั ะทะฐะฟััะบะฐ ัะตัะฒะธัะฐ ะฒ ะบะพะฝัะตะนะฝะตัะต. ะัะต ะผะตัะพะดั ะฟะพะบัััั ัะตััะฐะผะธ, ะบัะพะผะต ะผะตัะพะดะฐ, ัะฐะฑะพัะฐััะตะณะพ ั ะฟะพัะพะบะพะผ ะฑััะตัะธะทะพะฒะฐะฝะฝัั ะฑะฐะนัะพะฒ.
</justify> <br /> 
 <img  src="./readme_assets/logo-avito.png" width="100%">

## Project setup


### Installation

<p align="justify">
	
ะะปั ัะฑะพัะบะธ ัะตัะฒะธัะฐ ะฝะฐ ะฑะฐะทะต ะดะฐะฝะฝะพะณะพ ัะตะฟะพะทะธัะพัะธั ะฝัะถะฝั ัะปะตะดัััะธะต ััะธะปะธัั:
- Makefile
- Protocol Buffer Compiler ([protoc](https://github.com/protocolbuffers/protobuf/releases))
- [Docker](https://www.docker.com/)
- [Golang](https://go.dev/dl/)
	
ะะฐัะฐะผะตััั ัะพะตะดะธะฝะตะฝะธั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั ะฝะฐัะพะดัััั ะฒ ัะฐะนะปะต **config.yml**, ะฐ ัะฐะบะถะต ะฒ **docker-compose**. ะัะธ ะธะทะผะตะฝะตะฝะธะธ ะบะพะฝัะธะณััะฐัะธะพะฝะฝะพะณะพ ัะฐะนะปะฐ, ะฝะตะพะฑัะพะดะธะผะพ ัะฐะบะถะต ะฒะฝะตััะธ ะธะทะผะตะฝะตะฝะธั ะฒ ัะฐะนะป **docker-compose**. ะัะธ ะปะพะบะฐะปัะฝะพะผ ะทะฐะฟััะบะต ัะตัะฒะธัะฐ ะธะผั ัะพััะฐ ะฑะฐะทั ะดะฐะฝะฝัั localhost, ะฒ ัะปััะฐะต ะบะพะฝัะตะนะฝะตัะธะทะพะฒะฐะฝะฝะพะณะพ ะทะฐะฟััะบะฐ -- postgres. ะะปั ะทะฐะฟััะบะฐ ัะตัะฒะธัะฐ ะฝัะถะฝะพ ะฒะฒะตััะธ ัะปะตะดัััะธะต ะบะพะผะฐะฝะดั:
```
git clone https://github.com/nikitads9/segment-service-api.git
cd segment-service-api/
make deps
make vendor-proto
make generate
docker-compose up -d
```
- `make deps` ะบะพะผะฐะฝะดะฐ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะทะฐะฒะธัะธะผะพััะธ ะดะปั ัะฐะฑะพัั ะฟัะพะตะบัะฐ.
- `make vendor-proto` ัะบะฐัะธะฒะฐะตั ะฝะตะพะฑัะพะดะธะผัะต ะดะปั ัะฐะฑะพัั protobuf ะธ validate ััััะบััั ะฟะฐะบะตัั. ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั ััะพะน ะบะพะผะฐะฝะดั ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ะฟะพัะฒะธััั ะฟะฐะฟะบะฐ ัะพ ะฒัะตะผะธ ะฝะตะพะฑัะพะดะธะผัะผะธ `.proto` ัะฐะนะปะฐะผะธ.
- `make generate` ัะพะทะดะฐะตั: `grpc.pb.go`, `pb.go`, `pb.gw.go` ะธ `pb.validate.go` ะดะปั ัะตัะฒะธัะพะฒ **user** ะธ **segment** ะฝะฐ ะพัะฝะพะฒะฐะฝะธะธ ะบะพะฝััะฐะบัะพะฒ, ะพะฟะธัะฐะฝะฝัั ะฒ **user_v1.proto** ะธ **segment_v1.proto**. ะญัะธ ัะฐะนะปั ัะพะดะตัะถะฐั ััััะบัััั, ะธะฝัะตััะตะนัั ะธ ะผะตัะพะดั ะดะปั ัะฐะฑะพัั API, ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะต ั ะฟะพะผะพััั Protobuffer.
- `docker-compose up -d` ัะบะฐัะธะฒะฐะตั ะพะฑัะฐะท **alpine3.15** ั DockerHub (ะตัะปะธ ะพะฝ ะตัะต ะฝะต ะทะฐะณััะถะตะฝ), ัะพะฑะธัะฐะตั ะธัะฟะพะปะฝัะตะผัะน ัะฐะนะป ะธ ะดะฒะฐ ะบะพะฝัะตะนะฝะตัะฐ: ะพะดะธะฝ ะดะปั ัะตัะฒะตัะฝะพะณะพ ะฟัะธะปะพะถะตะฝะธั ั API, ะฐ ะฒัะพัะพะน ะดะปั ะฝะตะฟะพััะตะดััะฒะตะฝะฝะพ ัะตัะฒะตัะฐ ะฑะฐะทั ะดะฐะฝะฝัั. ะะฑะฐ ะบะพะฝัะตะนะฝะตัะฐ ะพัะณะฐะฝะธะทััััั ะฒ ัะฒัะทะฐะฝะฝัั ัะตัั ะดะพะบะตั, ะบะพัะพัะฐั ะฟะพะทะฒะพะปัะตั ะธะผ ะพะฑัะฐัะฐัััั ะดััะณ ะบ ะดััะณั ะฟะพ ะธะผะตะฝะธ. ะคะปะฐะณ -d ะฟะพะทะฒะพะปัะตั ะฒะตัะฝััั ัะฟัะฐะฒะปะตะฝะธะต ัะตัะผะธะฝะฐะปะพะผ ะฟะพะปัะทะพะฒะฐัะตะปั ะฑะตะท ะพััะฐะฝะพะฒะบะธ ะบะพะฝัะตะนะฝะตัะฐ. <br />
ะะปั ะณะตะฝะตัะฐัะธะธ html ัะฐะนะปะฐ ั ัะตะทัะปััะฐัะฐะผะธ ะฟะพะบัััะธั ัะตััะฐะผะธ ะบะพะดะฐ ะฝะตะพะฑัะพะดะธะผะพ ะฒะฒะตััะธ ัะปะตะดััััั ะบะพะผะฐะฝะดั:
```
make test-coverage
```

</justify>

## API use instruction

ะญัะพั ัะตัะฒะธั ัะฐััะธัะฝะพ ัะตะฐะปะธะทัะตั ะบะพะฝัะตะฟัะธั CRUD. ะก ะตะณะพ ะฟะพะผะพััั ะฒะพะทะผะพะถะฝะพ ัะพะทะดะฐะฒะฐัั ะธ ัะดะฐะปััั ัะตะณะผะตะฝัั ะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะฐ ัะฐะบะถะต ะฝะฐะทะฝะฐัะฐัั ัะตะณะผะตะฝัั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะธ ะฟัะตะบัะฐัะฐัั ััะฐััะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ ัะตะณะผะตะฝัะฐั. ะัะธ ะฟัะตะบัะฐัะตะฝะธะธ ัะฒัะทะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ัะตะณะผะตะฝัะฐ ะทะฐะฟะธัั ะพะฑ ััะฐััะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ัะตะณะผะตะฝัะต ัะพััะฐะฝัะตััั ั ัะปะฐะณะพะผ **state** `false` ะธ ะฟะพะผะตัะบะพะน ะพ ะฒัะตะผะตะฝะธ ัะดะฐะปะตะฝะธั ะธะท ัะตะณะผะตะฝัะฐ **time_of_expire**. ะัะธ ัะดะฐะปะตะฝะธะธ ัะตะณะผะตะฝัะฐ, ะทะฐะฟะธัะธ ะพ ะฒัะพะดััะธั ะฒ ะฝะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปัั ะฟะพะปะฝะพัััั ัะดะฐะปััััั. ะะฝััััะบัะธั, ัะฐะทะผะตัะตะฝะฝะฐั ะฝะธะถะต, ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ ะดะปั ะทะฐะฟัะพัะพะฒ HTTP+JSON ะฒ RESTful API ััะธะปะต. ะะปั ัะตััะธัะพะฒะฐะฝะธั gRPC ะบะปะธะตะฝัะฐ ัะผ. ะบะพะฝััะฐะบัั ะฒ ัะฐะนะปะฐั **segment.proto** ะธ **user.proto**.
<details>
<summary> 
1. ะผะตัะพะด AddUser 
</summary>
  
**POST** `host:port/user/add-user` <br />
ะะฑัะตะบั JSON, ะฟะตัะตะดะฐะฒะฐะตะผัะน ััะพะผั ะผะตัะพะดั ะดะพะปะถะตะฝ ะฒัะณะปัะดะตัั ัะฐะบ:
```
{
  "user_name": "user1"
}
```
ะะตัะพะด ะฒะพะทะฒัะฐัะฐะตั ะพะฑัะตะบั JSON ั ะฒะปะพะถะตะฝะฝัะผ id ะดะพะฑะฐะฒะปะตะฝะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
```
{
	"id": "1"
}
```
</details>
<details>
<summary> 
2. ะผะตัะพะด GetSegments
</summary>
  
**GET** `host:port/user/get-segments/{id}` <br />
ะญัะพั ะผะตัะพะด ะฝะต ะฝัะถะดะฐะตััั ะฒ JSON ะพะฑัะตะบัะต. ะะผะตััะพ ััะพะณะพ ััะตะฑัะตััั id ัะตะณะผะตะฝัะฐ.
ะะตัะพะด ะฒะพะทะฒัะฐัะฐะตั JSON ั  ะผะฐััะธะฒะพะผ ะฝะฐะทะฒะฐะฝะธะน ัะตะณะผะตะฝัะพะฒ:
```
{
	"slugs": [
		"segment1"
	]
}
```
</details>
<details>
<summary> 
3. ะผะตัะพะด ModifySegments
</summary>
  
**PATCH** `host:port/user/modify-segments` <br />
ะะฑัะตะบั JSON, ะฟะตัะตะดะฐะฒะฐะตะผัะน ััะพะผั ะผะตัะพะดั ะดะพะปะถะตะฝ ะฒัะณะปัะดะตัั ัะฐะบ:
```
{
  "id": "1",
  "slug_to_add": [
    "segment1"
  ],
  "slug_to_remove": [
    "segment2"
  ]
}
```
ะะพะทะฒัะฐัะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต ะดะพะปะถะฝะพ ะฒัะณะปัะดะตัั ะบะฐะบ ะฟัััะพะน ะพะฑัะตะบั JSON.
</details>
<details>
<summary> 
4. ะผะตัะพะด RemoveUser 
</summary>
  
**DELETE** `host:port/user/remove-user/{id}` <br />
ะฃ ะทะฐะฟัะพัะฐ ะฝะตั ัะตะปะฐ. ะะพะทะฒัะฐัะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต ะดะพะปะถะฝะพ ะฒัะณะปัะดะตัั ะบะฐะบ ะฟัััะพะน ะพะฑัะตะบั JSON.
</details>
<details>
<summary> 
5. ะผะตัะพะด SetExpireTime
</summary>
  
**POST** `host:port/user/set-expire-time` <br />
ะะฑัะตะบั JSON, ะฟะตัะตะดะฐะฒะฐะตะผัะน ััะพะผั ะผะตัะพะดั ะดะพะปะถะตะฝ ะฒัะณะปัะดะตัั ัะฐะบ:
```
{
  "id": "1",
  "slug": "segment1",
  "expiration_time": "2023-08-31T09:47:57.917Z"
}
```
ะะพะทะฒัะฐัะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต ะดะพะปะถะฝะพ ะฒัะณะปัะดะตัั ะบะฐะบ ะฟัััะพะน ะพะฑัะตะบั JSON.
</details>
<details>
<summary> 
6. ะผะตัะพะด AddSegment
</summary>
  
**POST** `host:port/segment/add-segment` <br />
ะะฑัะตะบั JSON, ะฟะตัะตะดะฐะฒะฐะตะผัะน ััะพะผั ะผะตัะพะดั ะดะพะปะถะตะฝ ะฒัะณะปัะดะตัั ัะฐะบ:
```
{
  "slug": "segment1"
}
```
ะะตัะพะด ะฒะพะทะฒัะฐัะฐะตั id ะดะพะฑะฐะฒะปะตะฝะฝะพะณะพ ัะตะณะผะตะฝัะฐ. 
```
{
	"id": "1"
}
```
</details>
<details>
<summary> 
7. ะผะตัะพะด RemoveSegment
</summary>
  
**DELETE** `host:port/segment/remove-segment/{id}` <br />
ะฃ ะทะฐะฟัะพัะฐ ะฝะตั ัะตะปะฐ. ะะพะทะฒัะฐัะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต ะดะพะปะถะฝะพ ะฒัะณะปัะดะตัั ะบะฐะบ ะฟัััะพะน ะพะฑัะตะบั JSON.
</details>
<details>
<summary> 
8. ะผะตัะพะด GetUserHistoryCsv
</summary>
  
**GET** `host:port/user/download-history/{id}` <br />
ะฃ ะทะฐะฟัะพัะฐ ะฝะตั ัะตะปะฐ, ะฟะตัะตะดะฐะตััั ัะพะปัะบะพ id ะฟะพะปัะทะพะฒะฐัะตะปั. ะ ะพัะฒะตั ะฟัะธัะพะดะธั ัะฐะบะฐั ััััะบัััะฐ, ะฒ ะบะพัะพัะพะน ัะพะดะตัะถะธััั ะผะฐััะธะฒ ะฑะฐะนัะพะฒ csv ัะฐะนะปะฐ ั ะธััะพัะธะตะน ัะตะณะผะตะฝัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั:
```
	"result": {
		"chunk": "string"
	}
}
```
</details>
